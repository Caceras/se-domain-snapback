<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>{% block title %}DropScan â€” .SE/.NU Domain Scanner{% endblock %}</title>

    <meta name="description" content="{% block meta_description %}Find valuable expiring .se and .nu domains before they become available. Daily snapback scanner with Wayback Machine index data.{% endblock %}">
    <meta name="keywords" content="domain scanner, .se domains, .nu domains, expiring domains, snapback, domain drop">
    <meta name="author" content="DropScan">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{% block og_title %}DropScan â€” .SE/.NU Domain Scanner{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Find valuable expiring .se and .nu domains.{% endblock %}">
    <meta property="og:site_name" content="DropScan">

    <!-- Favicon + PWA -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="apple-touch-icon" href="/static/favicon.svg">
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DropScan">
    <meta name="mobile-web-app-capable" content="yes">

    {% block structured_data %}{% endblock %}

    <style>
        /* â”€â”€â”€ Tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        :root {
            --bg:          #F5F5F7;
            --surface:     #FFFFFF;
            --surface-2:   #F5F5F7;
            --surface-3:   #E8E8ED;
            --label:       #1D1D1F;
            --label-2:     #6E6E73;
            --label-3:     #AEAEB2;
            --sep:         rgba(0,0,0,0.08);
            --fill:        rgba(0,0,0,0.04);
            --fill-2:      rgba(0,0,0,0.08);
            --blue:        #0071E3;
            --blue-h:      #0077ED;
            --blue-t:      rgba(0,113,227,0.1);
            --green:       #28CD41;
            --green-t:     rgba(40,205,65,0.1);
            --red:         #FF3B30;
            --red-t:       rgba(255,59,48,0.1);
            --tld-se:      #0071E3;
            --tld-nu:      #28CD41;
            --r:           12px;
            --r-sm:        8px;
            --r-lg:        18px;
            --shadow:      0 1px 3px rgba(0,0,0,0.04),0 4px 16px rgba(0,0,0,0.06);
            --shadow-sm:   0 1px 2px rgba(0,0,0,0.04);
            --nav-h:       52px;
            --tab-h:       0px;
            --safe-top:    env(safe-area-inset-top,0px);
            --safe-bot:    env(safe-area-inset-bottom,0px);
        }
        [data-theme="dark"] {
            --bg:          #000000;
            --surface:     #1C1C1E;
            --surface-2:   #2C2C2E;
            --surface-3:   #3A3A3C;
            --label:       #FFFFFF;
            --label-2:     #98989D;
            --label-3:     #636366;
            --sep:         rgba(255,255,255,0.1);
            --fill:        rgba(255,255,255,0.06);
            --fill-2:      rgba(255,255,255,0.12);
            --blue:        #0A84FF;
            --blue-h:      #1A8FFF;
            --blue-t:      rgba(10,132,255,0.15);
            --green:       #30D158;
            --green-t:     rgba(48,209,88,0.15);
            --red:         #FF453A;
            --red-t:       rgba(255,69,58,0.15);
            --tld-se:      #0A84FF;
            --tld-nu:      #30D158;
            --shadow:      0 1px 3px rgba(0,0,0,0.3),0 4px 16px rgba(0,0,0,0.4);
            --shadow-sm:   0 1px 2px rgba(0,0,0,0.3);
        }

        /* â”€â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        *,*::before,*::after { box-sizing:border-box; margin:0; padding:0; }
        html { font-size:16px; scroll-behavior:smooth; -webkit-text-size-adjust:100%; }
        body {
            font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue","Segoe UI",sans-serif;
            font-size:15px; line-height:1.5;
            color:var(--label); background:var(--bg);
            -webkit-tap-highlight-color:transparent;
            overscroll-behavior-y:none;
            padding-top:calc(var(--nav-h) + var(--safe-top));
            padding-bottom:var(--tab-h);
            transition:background .2s,color .2s;
        }

        /* â”€â”€â”€ Navbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .navbar {
            position:fixed; top:0; left:0; right:0; z-index:200;
            height:calc(var(--nav-h) + var(--safe-top));
            padding-top:var(--safe-top);
            background:rgba(255,255,255,.85);
            backdrop-filter:saturate(180%) blur(20px);
            -webkit-backdrop-filter:saturate(180%) blur(20px);
            border-bottom:.5px solid var(--sep);
        }
        [data-theme="dark"] .navbar { background:rgba(28,28,30,.85); }

        .navbar-inner {
            max-width:1100px; margin:0 auto; padding:0 20px;
            height:var(--nav-h);
            display:flex; align-items:center; justify-content:space-between; gap:12px;
        }
        .navbar-brand {
            display:flex; align-items:center; gap:10px;
            text-decoration:none; color:var(--label);
        }
        .navbar-logo { width:28px; height:28px; border-radius:7px; flex-shrink:0; }
        .navbar-title { font-size:17px; font-weight:700; letter-spacing:-.03em; }

        .nav-links { display:none; align-items:center; gap:4px; }
        .nav-links a {
            font-size:14px; font-weight:500; color:var(--label-2);
            text-decoration:none; padding:6px 12px; border-radius:var(--r-sm);
            transition:color .15s,background .15s;
        }
        .nav-links a:hover { color:var(--label); background:var(--fill); }
        .nav-links a.active { color:var(--blue); }

        .navbar-end { display:flex; align-items:center; gap:8px; }

        .btn-scan-nav {
            display:none; align-items:center; gap:6px;
            padding:7px 16px; background:var(--blue); color:#fff;
            border:none; border-radius:20px; font:600 13px/1 inherit;
            cursor:pointer; transition:opacity .15s,transform .1s; white-space:nowrap;
        }
        .btn-scan-nav:hover { opacity:.88; }
        .btn-scan-nav:active { transform:scale(.96); }
        .btn-scan-nav:disabled { opacity:.4; cursor:not-allowed; transform:none; }

        .btn-theme {
            width:36px; height:36px; border-radius:50%;
            background:var(--fill); border:none; cursor:pointer;
            display:flex; align-items:center; justify-content:center;
            font-size:15px; color:var(--label-2); transition:background .15s;
        }
        .btn-theme:hover { background:var(--fill-2); }

        /* â”€â”€â”€ Main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        main { max-width:1100px; margin:0 auto; padding:24px 16px 40px; }

        /* â”€â”€â”€ Section headings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .page-title {
            font-size:26px; font-weight:700; letter-spacing:-.04em;
            margin-bottom:4px;
        }
        .page-subtitle { font-size:14px; color:var(--label-2); margin-bottom:20px; }

        /* â”€â”€â”€ Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .card { background:var(--surface); border-radius:var(--r-lg); padding:20px; margin-bottom:16px; box-shadow:var(--shadow); }
        .card-title { font-size:17px; font-weight:600; letter-spacing:-.02em; margin-bottom:14px; }

        /* â”€â”€â”€ Stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .stats { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-bottom:20px; }
        .stat-card {
            background:var(--surface); border-radius:var(--r);
            padding:14px 16px; box-shadow:var(--shadow-sm);
            transition:transform .15s;
        }
        .stat-card:active { transform:scale(.97); }
        .stat-value { font-size:28px; font-weight:700; letter-spacing:-.04em; line-height:1.1; }
        .stat-label { font-size:11px; font-weight:600; color:var(--label-2); margin-top:4px; text-transform:uppercase; letter-spacing:.05em; }

        /* â”€â”€â”€ Search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .search-wrap { position:relative; margin-bottom:12px; }
        .search-wrap .ico {
            position:absolute; left:11px; top:50%; transform:translateY(-50%);
            color:var(--label-3); pointer-events:none; width:14px; height:14px;
        }
        .search-input {
            width:100%; padding:10px 36px; background:var(--fill);
            border:none; border-radius:10px; font:15px/1.4 inherit;
            color:var(--label); -webkit-appearance:none; appearance:none; outline:none;
            transition:background .15s,box-shadow .15s;
        }
        .search-input::placeholder { color:var(--label-3); }
        .search-input:focus { background:var(--fill-2); box-shadow:0 0 0 3px var(--blue-t); }
        .search-clear {
            position:absolute; right:8px; top:50%; transform:translateY(-50%);
            background:var(--label-3); border:none; border-radius:50%;
            width:18px; height:18px; display:none; align-items:center; justify-content:center;
            cursor:pointer; color:var(--surface); font-size:10px; transition:background .15s;
        }
        .search-clear.on { display:flex; }
        .search-clear:hover { background:var(--label-2); }

        /* â”€â”€â”€ Chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .chip-row { display:flex; gap:6px; flex-wrap:wrap; margin-bottom:12px; }
        .chip {
            display:inline-flex; align-items:center; gap:4px;
            padding:5px 12px; background:var(--fill); color:var(--label-2);
            border:none; border-radius:20px; font:500 13px/1 inherit;
            cursor:pointer; transition:background .15s,color .15s; white-space:nowrap;
        }
        .chip:hover { background:var(--fill-2); color:var(--label); }
        .chip.on { background:var(--blue); color:#fff; }
        .chip .n { font-size:11px; opacity:.75; }
        .chip.on .n { opacity:.85; }

        /* â”€â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .btn {
            display:inline-flex; align-items:center; justify-content:center; gap:6px;
            padding:9px 18px; border-radius:20px; border:none;
            font:600 14px/1 inherit; cursor:pointer;
            transition:opacity .15s,transform .1s;
            text-decoration:none; white-space:nowrap;
        }
        .btn:active { transform:scale(.96); }
        .btn:disabled { opacity:.4; cursor:not-allowed; transform:none; }
        .btn-primary { background:var(--blue); color:#fff; }
        .btn-primary:hover { opacity:.88; }
        .btn-ghost { background:var(--fill); color:var(--label-2); }
        .btn-ghost:hover { background:var(--fill-2); color:var(--label); }
        .btn-tinted { background:var(--blue-t); color:var(--blue); }
        .btn-tinted:hover { opacity:.8; }

        /* â”€â”€â”€ Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .table-wrap { overflow-x:auto; -webkit-overflow-scrolling:touch; margin:0 -20px; padding:0; }
        table { width:100%; border-collapse:collapse; min-width:560px; }
        th {
            padding:8px 12px; text-align:left;
            font-size:11px; font-weight:600; letter-spacing:.06em; text-transform:uppercase;
            color:var(--label-3); border-bottom:.5px solid var(--sep);
            white-space:nowrap; background:var(--surface); position:sticky; top:0; z-index:1;
        }
        th.sort { cursor:pointer; user-select:none; }
        th.sort:hover { color:var(--label-2); }
        th.asc,th.desc { color:var(--blue); }
        .si { margin-left:3px; opacity:.5; font-size:9px; }
        th.asc .si,th.desc .si { opacity:1; }
        td { padding:10px 12px; font-size:14px; border-bottom:.5px solid var(--sep); white-space:nowrap; vertical-align:middle; }
        tbody tr { transition:background .1s; }
        tbody tr:hover { background:var(--fill); }
        tbody tr:active { background:var(--fill-2); }
        tbody tr:last-child td { border-bottom:none; }

        /* â”€â”€â”€ TLD badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .tld { display:inline-block; font-size:12px; font-weight:600; padding:2px 7px; border-radius:5px; }
        .tld-se { background:var(--blue-t); color:var(--tld-se); }
        .tld-nu { background:var(--green-t); color:var(--tld-nu); }

        /* â”€â”€â”€ Status pills â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .pill { display:inline-flex; align-items:center; gap:3px; padding:3px 8px; border-radius:20px; font-size:12px; font-weight:500; }
        .pill-g { background:var(--green-t); color:var(--green); }
        .pill-r { background:var(--red-t);   color:var(--red); }
        .pill-m { background:var(--fill);    color:var(--label-3); }

        /* â”€â”€â”€ Toolbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .toolbar { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:10px; flex-wrap:wrap; }
        .rcount { font-size:12px; color:var(--label-3); }

        /* â”€â”€â”€ Breadcrumb â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .breadcrumb { display:flex; align-items:center; gap:6px; font-size:13px; color:var(--label-2); margin-bottom:16px; }
        .breadcrumb a { color:var(--blue); text-decoration:none; }
        .breadcrumb a:hover { text-decoration:underline; }

        /* â”€â”€â”€ Report list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .report-list { list-style:none; }
        .report-list li + li { border-top:.5px solid var(--sep); }
        .report-list a {
            display:flex; align-items:center; justify-content:space-between;
            padding:12px 0; color:var(--label); text-decoration:none; gap:8px;
        }
        .report-list a:hover .rd { color:var(--blue); }
        .report-list a:active { opacity:.7; }
        .rd { font-size:15px; font-weight:500; transition:color .15s; }
        .rc { color:var(--label-3); font-size:12px; flex-shrink:0; }

        /* â”€â”€â”€ Empty state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .empty { text-align:center; padding:48px 24px; color:var(--label-2); }
        .empty .ei { font-size:40px; margin-bottom:12px; opacity:.4; }
        .empty p { font-size:15px; margin-bottom:16px; }

        /* â”€â”€â”€ Badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .badge { display:inline-flex; align-items:center; padding:2px 8px; border-radius:20px; font-size:11px; font-weight:600; }
        .badge-blue  { background:var(--blue-t);  color:var(--blue); }
        .badge-green { background:var(--green-t); color:var(--green); }
        .badge-muted { background:var(--fill);    color:var(--label-3); }

        /* â”€â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #toast {
            position:fixed; bottom:calc(var(--tab-h) + 16px + var(--safe-bot));
            left:50%; transform:translateX(-50%) translateY(16px);
            background:var(--surface-2); color:var(--label);
            border:.5px solid var(--sep); padding:10px 18px; border-radius:20px;
            font-size:13px; font-weight:500; box-shadow:var(--shadow);
            opacity:0; transition:opacity .25s,transform .25s;
            pointer-events:none; z-index:300; white-space:nowrap;
            display:flex; align-items:center; gap:8px;
        }
        #toast.on { opacity:1; transform:translateX(-50%) translateY(0); }

        /* â”€â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        ::-webkit-scrollbar { height:4px; width:4px; }
        ::-webkit-scrollbar-track { background:transparent; }
        ::-webkit-scrollbar-thumb { background:var(--surface-3); border-radius:4px; }

        /* â”€â”€â”€ Animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        @keyframes fadeUp { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
        .fup { animation:fadeUp .3s ease forwards; }

        /* â”€â”€â”€ Tab bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .tab-bar { display:none; }

        /* â”€â”€â”€ Desktop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        @media (min-width:700px) {
            .nav-links { display:flex; }
            .btn-scan-nav { display:inline-flex; }
            main { padding:32px 24px 56px; }
            .stats { grid-template-columns:repeat(4,1fr); }
            .stat-value { font-size:32px; }
            .stat-card:hover { transform:translateY(-2px); box-shadow:var(--shadow); }
        }

        /* â”€â”€â”€ Mobile â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        @media (max-width:699px) {
            :root { --tab-h:calc(56px + var(--safe-bot)); }

            .tab-bar {
                display:flex; position:fixed; bottom:0; left:0; right:0; z-index:200;
                background:rgba(255,255,255,.92);
                backdrop-filter:saturate(180%) blur(20px);
                -webkit-backdrop-filter:saturate(180%) blur(20px);
                border-top:.5px solid var(--sep);
                padding-bottom:var(--safe-bot); height:var(--tab-h);
                align-items:flex-start; padding-top:6px;
            }
            [data-theme="dark"] .tab-bar { background:rgba(28,28,30,.92); }

            .tab-item {
                flex:1; display:flex; flex-direction:column; align-items:center; gap:3px;
                padding:4px 8px; background:none; border:none; font-family:inherit;
                font-size:10px; font-weight:500; color:var(--label-3);
                cursor:pointer; text-decoration:none; transition:color .15s;
                -webkit-tap-highlight-color:transparent;
            }
            .tab-item svg { width:22px; height:22px; }
            .tab-item.on { color:var(--blue); }
            .tab-scan-btn {
                color:var(--blue);
            }
            .tab-scan-btn svg {
                background:var(--blue); color:#fff;
                border-radius:9px; padding:4px; width:26px; height:26px;
            }
            .tab-scan-btn:disabled { opacity:.45; }
        }

        @media (display-mode:standalone) {
            .navbar { padding-top:var(--safe-top); }
        }

        {% block extra_style %}{% endblock %}
    </style>
</head>
<body>

<header class="navbar">
    <div class="navbar-inner">
        <a href="/" class="navbar-brand">
            <img src="/static/favicon.svg" class="navbar-logo" alt="DropScan">
            <span class="navbar-title">DropScan</span>
        </a>
        <nav class="nav-links" aria-label="Main">
            <a href="/" id="nl-latest">Latest</a>
            <a href="#" onclick="toReports(event)" id="nl-history">History</a>
        </nav>
        <div class="navbar-end">
            <button class="btn btn-primary btn-scan-nav" id="scan-btn-nav" onclick="startScan()">
                <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a7 7 0 100 14A7 7 0 008 1zm0 1.5a5.5 5.5 0 110 11 5.5 5.5 0 010-11zM8 4a.75.75 0 01.75.75v2.5h2.5a.75.75 0 010 1.5h-2.5v2.5a.75.75 0 01-1.5 0v-2.5h-2.5a.75.75 0 010-1.5h2.5v-2.5A.75.75 0 018 4z"/></svg>
                Run Scan
            </button>
            <button class="btn-theme" onclick="toggleTheme()" aria-label="Toggle dark mode">
                <span id="theme-ico">â˜€ï¸</span>
            </button>
        </div>
    </div>
</header>

<main>{% block content %}{% endblock %}</main>

<div id="toast" role="status" aria-live="polite"></div>

<nav class="tab-bar" aria-label="Navigation">
    <a href="/" class="tab-item" id="tab-latest">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="7"/><path d="m21 21-4.35-4.35"/></svg>
        <span>Latest</span>
    </a>
    <a href="#" onclick="toReports(event)" class="tab-item" id="tab-history">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M3 9h18M9 4v5M15 4v5"/></svg>
        <span>History</span>
    </a>
    <button class="tab-item tab-scan-btn" id="tab-scan" onclick="startScan()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        <span>Scan</span>
    </button>
</nav>

<script>
/* â”€â”€ Theme â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function applyTheme(t) {
    document.documentElement.setAttribute('data-theme', t);
    var i = document.getElementById('theme-ico');
    if (i) i.textContent = t === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
}
function toggleTheme() {
    var n = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    applyTheme(n); localStorage.setItem('theme', n);
}
(function(){
    var s = localStorage.getItem('theme');
    if (s) { applyTheme(s); return; }
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches) applyTheme('dark');
})();

/* â”€â”€ Active nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
    var p = location.pathname;
    var isHome = (p === '/' || p === '/index.html' || p === '');
    ['nl-latest','tab-latest'].forEach(function(id){
        var el = document.getElementById(id);
        if (el) el.classList.toggle('on', isHome);
    });
    ['nl-history','tab-history'].forEach(function(id){
        var el = document.getElementById(id);
        if (el) el.classList.toggle('on', !isHome);
    });
})();

function toReports(e) {
    if (e) e.preventDefault();
    var el = document.getElementById('reports-section');
    if (el) el.scrollIntoView({behavior:'smooth',block:'start'});
    else if (location.pathname !== '/') location.href = '/#reports-section';
}

/* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
var _tt;
function showToast(msg, persist) {
    var t = document.getElementById('toast');
    if (!t) return;
    t.textContent = msg; t.classList.add('on');
    clearTimeout(_tt);
    if (!persist) _tt = setTimeout(function(){ t.classList.remove('on'); }, 3500);
}
function hideToast() { var t = document.getElementById('toast'); if (t) t.classList.remove('on'); }

/* â”€â”€ Scan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function setScanBusy(v) {
    ['scan-btn-nav','scan-btn-inline','tab-scan'].forEach(function(id){
        var el = document.getElementById(id);
        if (el) el.disabled = v;
    });
}
function pollStatus() {
    fetch('/api/scan/status').then(function(r){return r.json();}).then(function(d){
        setScanBusy(d.running);
        if (d.running) showToast('â³ ' + d.message, true);
        else if (d.last_scan) { hideToast(); showToast('âœ“ Last scan: ' + new Date(d.last_scan).toLocaleTimeString()); }
    }).catch(function(){});
}
function startScan() {
    if (!confirm('Run a new scan? This checks domains dropping tomorrow and may take a few minutes.')) return;
    setScanBusy(true); showToast('Starting scanâ€¦', true);
    fetch('/api/scan/start', {method:'POST', headers:{'Content-Type':'application/json'}, body:'{}'})
    .then(function(r){return r.json();})
    .then(function(){
        var iv = setInterval(function(){
            fetch('/api/scan/status').then(function(r){return r.json();}).then(function(st){
                setScanBusy(st.running);
                if (st.running) showToast('â³ ' + st.message, true);
                else { clearInterval(iv); setScanBusy(false); showToast('âœ“ Scan complete'); setTimeout(function(){location.reload();},1400); }
            });
        }, 4000);
    })
    .catch(function(e){ setScanBusy(false); showToast('Error: ' + e); });
}
document.addEventListener('DOMContentLoaded', pollStatus);

/* â”€â”€ Service Worker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/static/sw.js').catch(function(){});
}
</script>
{% block extra_script %}{% endblock %}
</body>
</html>
